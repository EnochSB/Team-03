{% extends 'account_base.html' %}
{% load static %}
{% block content %}
<div class="container mb-3">
  <div class="d-flex justify-content-center text-center">
    <div class="row b_size">
      <h4 class="my-4">회원정보 수정</h4>
      <hr />

      <form
        action="{% url 'accounts:update' %}"
        method="post"
        enctype="multipart/form-data"
      >
        {% csrf_token %} {{ form.as_p }}
        <div class="d-flex justify-content-around">
          <div
            class="d-flex align-items-center"
            style="font-size: 15px"
          ></div>
        </div>
        <div class="d-grid gap-2 mt-3">
          <input
            class="inline-block btn btn-primary"
            type="submit"
            value="수정"
          />
        </div>
      </form>

      <form action="{% url 'accounts:delete' %}" method="POST" id="delete">
        {% csrf_token %}
        <input type="hidden" name="next" value="{{ request.path }}" />
      </form>
      <input
        class="btn btn-outline-danger mt-3"
        onclick="confirmDelete(event)"
        type="submit"
        value="회원 탈퇴"
        style="width: 376px; margin-left: 12px"
      />
    </div>
  </div>
</div>

<script>
  function confirmDelete(event) {
    event.preventDefault()

    if (confirm("정말로 탈퇴하시겠습니까?")) {
      document.querySelector("#delete").submit()
    }
  }
</script>
{% endblock content %}
